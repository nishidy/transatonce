function showNotice(e){$("#"+e).show("blind",{easing:"easeOutBounce"},1e3,function(){timer_id=setTimeout(function(){$("#"+e).is(":visible")&&$("#"+e).hide("blind",{easing:"easeOutExpo"},1e3)},15e3)})}function hideNotice(e){$("#"+e).hide("blind",{easing:"easeOutExpo"},1e3),clearTimeout(timer_id)}function onKeyUp(e){document.forms.trans.elements.input.disabled||27==e.keyCode&&deleteChildElements("disp_parent")}function deleteChildElements(e){var t=document.getElementById(e)
if(firstChild=t.firstChild,null!=firstChild){for(;firstChild.nextSibling;)t.removeChild(firstChild.nextSibling)
t.removeChild(firstChild)}}function ripple(e,t){e>255||(setTimeout(function(){ripple(e+1,t)},10),0==t?document.bgColor="#"+e.toString(16)+e.toString(16)+"ff":1==t?document.bgColor="#"+e.toString(16)+"ff"+e.toString(16):document.bgColor="#ff"+e.toString(16)+e.toString(16))}function fadeOut(e,t){var n="notice_"+String(e)
if(0>t){var o=document.getElementById(n)
return pnode=o.parentNode,void pnode.removeChild(o)}$("#"+n).css({opacity:t/10}),setTimeout(function(){fadeOut(e,t-1)},50)}function notice(e,t){var n="notice_"+String(e),o=document.createElement("span")
o.innerHTML=t,o.id=n,document.body.appendChild(o)
var i={position:"absolute",top:$(window).scrollTop()+25+"px",left:3*window.innerWidth/5+"px",border:"3px solid yellow",padding:"10px",backgroundColor:"#ffffcc",fontWeight:"bold"}
$("#"+n).css(i),$("#"+n).show(),setTimeout(function(){$("#"+n).fadeOut(function(){var e=document.getElementById(n)
pnode=e.parentNode,pnode.removeChild(e)})},1e3)}function makeQueries(){document.forms.trans.elements.input.disabled=!0,document.forms.trans.elements.increment.checked||deleteChildElements("disp_parent")
for(var e=document.forms.trans.elements.text.value,t=[],n=e.split("\n"),o=0;o<n.length;++o)""==n[o]||t.push(n[o])
for(var i=document.getElementById("disp_parent"),r=0,o=0;o<i.childNodes.length;o++)id=parseInt(i.childNodes[o].id.split("_")[1])+1,r<id&&(r=id)
var d=""
site_elem=document.forms.trans.elements.site
for(var l=0;l<site_elem.length;l++)if(site_elem[l].checked){d=site_elem[l].value
break}var s=document.createElement("div")
s.id="loader_image"
var a=document.createElement("p")
if(s.appendChild(a),document.body.insertBefore(s,i),startAnimation(d),localStorage.transatonce){for(var c=[],m=localStorage.transatonce.split("\n"),o=0;o<t.length;o++)-1==$.inArray(t[o],m)&&c.push(t[o])
var u=c.join("\n")
try{localStorage.transatonce+="\n"+u}catch(f){if(f.code===DOMException.QUOTA_EXCEEDED_ERR||"NS_ERROR_DOM_QUOTA_REACHED"===f.name){for(var p=0,h=0,o=0;o<m.length-1;o++)if(p+=m[o].length,p++,p>u.length){h=o
break}localStorage.transatonce=m.slice(h+1).join("\n")+"\n"+u}else alert("エラーが発生しました.")}}else localStorage.transatonce=t.join("\n")
query(0,t,r,d)}function deleteDiv(e){var t=document.getElementById("disp_parent")
t.removeChild(document.getElementById(e))}function query(e,t,n,o){if(document.forms.trans.elements.notice.checked&&e>0&&""!=t[e-1]&&notice(e,t[e-1]),e>0){var i="disp_"+String(e-1+n),r=document.getElementById(i),d=document.createElement("input")
d.type="button",d.value="Close",d.setAttribute("onClick","deleteDiv('"+i+"')")
var l=document.createElement("span")
l.innerHTML="&nbsp;&nbsp;",r.childNodes.length>4?(r.insertBefore(d,r.childNodes[4]),r.insertBefore(l,r.childNodes[4])):r.firstChild&&(r.insertBefore(l,r.firstChild),r.insertBefore(d,r.firstChild))}if(e>=t.length)return document.forms.trans.elements.input.disabled=!1,stopAnimation(),void document.body.removeChild(document.getElementById("loader_image"))
var s="disp_"+String(e+n),a=document.createElement("div")
a.id=s,parent=document.getElementById("disp_parent"),parent.firstChild?parent.insertBefore(a,parent.firstChild):parent.appendChild(a),$("div#"+s).load("/trans",{word:t[e],site:o},function(i,r,d){query(e+1,t,n,o)})}function flushCacheEntries(){var e=confirm("保存された単語を消去しますか?")
1==e&&localStorage.clear()}function count(){var e=document.forms.trans.elements.text.value
e.split("\n").length>50&&alert("Too many words to process!\n")}function explain(e){"increment"==e?document.forms.trans.elements.increment.checked&&showNotice("incr_notice"):"notice"==e&&(document.forms.trans.elements.notice.checked||alert("noticeボタンのチェックを外すと、処理が終わった通知が出なくなります。"))}function ask(){if(!document.forms.trans.elements.input.disabled&&document.forms.trans.elements.increment.checked){var e=document.forms.trans.elements.text.value
""!=e&&(document.forms.trans.elements.text.value="")}}function loadCache(){var e=document.forms.trans.elements.text
localStorage.transatonce&&(e.value=localStorage.transatonce)}function clearBox(){document.forms.trans.elements.text.value=""}var timer_id
