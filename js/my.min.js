function onKeyUp(e){document.forms.trans.elements.input.disabled||27==e.keyCode&&deleteChildElements("disp_parent")}function deleteChildElements(e){if(elem=document.getElementById(e),firstChild=elem.firstChild,null!=firstChild){for(;firstChild.nextSibling;)elem.removeChild(firstChild.nextSibling);elem.removeChild(firstChild)}}function ripple(e,n){e>255||(setTimeout(function(){ripple(e+1,n)},10),document.bgColor=0==n?"#"+e.toString(16)+e.toString(16)+"ff":1==n?"#"+e.toString(16)+"ff"+e.toString(16):"#ff"+e.toString(16)+e.toString(16))}function vanish(e,n){return id="notice_"+String(e),0>n?(elem=document.getElementById(id),pnode=elem.parentNode,void pnode.removeChild(elem)):($("#"+id).css({opacity:n/10}),void setTimeout(function(){vanish(e,n-1)},50))}function notice(e,n){id="notice_"+String(e),new_span=document.createElement("span"),new_span.innerHTML=n,new_span.id=id,document.body.appendChild(new_span);var t={position:"absolute",top:$(window).scrollTop()+25+"px",left:3*window.innerWidth/5+"px",border:"3px solid yellow",padding:"10px",backgroundColor:"#ffffcc",fontWeight:"bold"};$("#"+id).css(t),vanish(e,10)}function makeQueries(){document.forms.trans.elements.input.disabled=!0,document.forms.trans.elements.increment.checked||deleteChildElements("disp_parent");for(var e=document.forms.trans.elements.text.value,n=[],t=e.split("\n"),i=0;i<t.length;++i)""==t[i]||n.push(t[i]);var d=document.getElementById("disp_parent");for(ncur=0,i=0;i<d.childNodes.length;i++)id=parseInt(d.childNodes[i].id.split("_")[1])+1,id>ncur&&(ncur=id);site="",site_elem=document.forms.trans.elements.site;for(var r=0;r<site_elem.length;r++)if(site_elem[r].checked){site=site_elem[r].value;break}new_div=document.createElement("div"),new_div.id="loader_image",new_p=document.createElement("p"),new_div.appendChild(new_p),document.body.insertBefore(new_div,d),startAnimation(site),query(0,n,ncur,site)}function deleteDiv(e){par=document.getElementById("disp_parent"),par.removeChild(document.getElementById(e))}function query(e,n,t,i){return document.forms.trans.elements.notice.checked&&e>0&&""!=n[e-1]&&notice(e,n[e-1]),e>0&&(prev_id="disp_"+String(e-1+t),prev_div=document.getElementById(prev_id),new_input=document.createElement("input"),new_input.type="button",new_input.value="Close",new_input.setAttribute("onClick","deleteDiv('"+prev_id+"')"),new_span=document.createElement("span"),new_span.innerHTML="&nbsp;&nbsp;",prev_div.childNodes.length>4?(prev_div.insertBefore(new_input,prev_div.childNodes[4]),prev_div.insertBefore(new_span,prev_div.childNodes[4])):prev_div.firstChild&&(prev_div.insertBefore(new_span,prev_div.firstChild),prev_div.insertBefore(new_input,prev_div.firstChild))),e>=n.length?(document.forms.trans.elements.input.disabled=!1,stopAnimation(),void document.body.removeChild(document.getElementById("loader_image"))):(tag_div="disp_"+String(e+t),new_div=document.createElement("div"),new_div.id=tag_div,parent=document.getElementById("disp_parent"),parent.firstChild?parent.insertBefore(new_div,parent.firstChild):parent.appendChild(new_div),void $("div#"+tag_div).load("/trans",{word:n[e],site:i},function(){query(e+1,n,t,i)}))}function count(){var e=document.forms.trans.elements.text.value;e.split("\n").length>50&&alert("Too many words to process!\n")}function explain(e){"increment"==e?document.forms.trans.elements.increment.checked&&alert("このボタンをチェックすることにより、前回の結果に続けて表示していきます。"):"notice"==e&&(document.forms.trans.elements.notice.checked||alert("noticeボタンのチェックを外すと、処理が終わった通知が出なくなります。"))}function ask(){if(!document.forms.trans.elements.input.disabled&&document.forms.trans.elements.increment.checked){var e=document.forms.trans.elements.text.value;if(""!=e){var n=confirm("テキストボックスの内容を消去しますか?");1==n&&(document.forms.trans.elements.text.value="")}}}